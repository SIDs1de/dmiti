from typing import Self

class SUB_NDN_N:
    def SUB_NDN_N(self: Self, second: Self, d: int) -> Self:
        """
        Автор: Viktor Permitin
        Вычитание из натурального другого
        натурального, умноженного на цифру
        
        Параметры:
            self: Self - уменьшаемое натуральное число
            second: Self - вычитаемое натуральное число (будет умножено на цифру d)
            d: int - цифра (0-9), на которую умножается вычитаемое
        
        Возвращает:
            Self - результат вычитания (self - second * d)
        
        Алгоритм:
            1. Проверяем, что d является корректной цифрой (0-9)
            2. Умножаем вычитаемое second на цифру d с помощью MUL_ND_N
            3. Сравниваем результат умножения с уменьшаемым self
            4. Если результат умножения больше уменьшаемого, выбрасываем исключение
               (так как результат должен быть неотрицательным)
            5. Выполняем вычитание с помощью SUB_NN_N
        
        Примеры:
            SUB_NDN_N(123, 45, 2) = 123 - 45*2 = 123 - 90 = 33
            SUB_NDN_N(100, 10, 5) = 100 - 10*5 = 100 - 50 = 50
        
        Используется в:
            - DIV_NN_N (деление натуральных чисел)
            - MOD_NN_N (остаток от деления)
        """
        # Проверка корректности цифры d (должна быть от 0 до 9)
        if d < 0 or d > 9:
            raise ValueError("d must be in 0..9 (digit)")
        
        # Умножаем вычитаемое на цифру d
        second = second.MUL_ND_N(d)
        
        # Сравниваем результат умножения с уменьшаемым
        # cmp_result: 2 - если second > self, 0 - если равны, 1 - если second < self
        cmp_result = second.COM_NN_D(self)
        
        # Если результат умножения больше уменьшаемого, результат будет отрицательным
        # Это недопустимо для натуральных чисел, поэтому выбрасываем исключение
        if cmp_result >= 2:
            raise ValueError("Result must be positive (macan)")
        
        # Выполняем вычитание: self - (second * d)
        return self.SUB_NN_N(second)

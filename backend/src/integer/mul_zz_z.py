from typing import Self

class Mul_zz_z:
    def mul_zz_z(self: Self, second: Self) -> Self:
        """
        Приготовил: Viktor Permitin
        Умножение целых чисел
        
        Параметры:
            self: Self - первый множитель (целое число)
            second: Self - второй множитель (целое число)
        
        Возвращает:
            Self - произведение двух целых чисел (self * second)
        
        Алгоритм:
            Выполняет умножение целых чисел с учетом знаков.
            
            1. Умножаем абсолютные значения обоих чисел с помощью MUL_NN_N
               (умножение натуральных чисел)
            2. Определяем знак результата по правилу знаков:
               - Если знаки одинаковые (оба положительные или оба отрицательные),
                 результат положительный
               - Если знаки разные, результат отрицательный
            3. Если знаки разные, умножаем результат на -1 с помощью mul_zm_z()
        
        Правило знаков:
            (+) * (+) = (+)
            (+) * (-) = (-)
            (-) * (+) = (-)
            (-) * (-) = (+)
        
        Примеры:
            mul_zz_z(5, 3) = 15
            mul_zz_z(-5, 3) = -15
            mul_zz_z(5, -3) = -15
            mul_zz_z(-5, -3) = 15
            mul_zz_z(5, 0) = 0
            mul_zz_z(0, -3) = 0
        
        Используется в:
            - MUL_QQ_Q (умножение рациональных чисел)
            - MUL_PQ_P (умножение многочлена на рациональное число)
            - MOD_ZZ_Z (остаток от деления целых чисел)
            - DIV_QQ_Q (деление рациональных чисел)
        
        Примечание:
            Метод работает с длинными целыми числами. Умножение абсолютных значений
            выполняется методом MUL_NN_N, который реализует алгоритм умножения
            длинных натуральных чисел (умножение "в столбик").
        """
        # Умножаем абсолютные значения обоих чисел
        # Результат изначально положительный (sign = 0)
        result = self.__class__(0, second.absolute.MUL_NN_N(self.absolute))
        
        # Применяем правило знаков:
        # Если знаки множителей разные, результат отрицательный
        # sign: 0 - положительное, 1 - отрицательное
        if self.sign != second.sign:
            result = result.mul_zm_z()  # Умножаем на -1 (меняем знак)
        
        return result
        